{"version":3,"sources":["serviceHelper.js","CreationForm.js","Advert.js","AdsBlock.js","localStorageService.js","App.js","index.js"],"names":["getNextAdvertId","currentId","localStorage","getItem","setItem","CreationForm","addAdvert","initAdvertObj","title","description","phone","cityId","useState","advertObj","setAdvertObj","validAll","setValidAll","validTitle","setValidTitle","validDescr","setValidDescr","validPhone","setValidPhone","prevPhone","setPrevPhone","titleFieldValid","setTitleFieldValid","descFieldValid","setDescFieldValid","phoneFieldValid","setPhoneFieldValid","setAdvertField","fieldName","value","prevData","useEffect","className","htmlFor","type","placeholder","id","required","onChange","event","fieldValue","target","length","rows","phoneFieldValue","test","slice","e","disabled","onClick","preventDefault","AdsBlock","removeAdvert","city","Map","get","getCityName","adverts","advertsArr","setAdvertsArr","map","item","Advert","key","setAdvertsAtLS","JSON","stringify","App","setAdverts","React","parse","getAllAdverts","advRemoveIndx","findIndex","newAdvertsArr","concat","splice","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.735a9e0e.chunk.js","sourcesContent":["function transformPhone(phone) {\r\n  if (!/^([+\\s()-]|\\d)*$/.test(phone)) return phone.slice(0, -1);\r\n\r\n  if (phone.length < 4) return '+7 (' + phone\r\n  else if (phone.length === 7) return phone + ') '\r\n  else if (phone.length === 12) return phone + '-'\r\n  else if (phone.length === 15) return phone + '-'\r\n  else return phone;\r\n}\r\n\r\nfunction getNextAdvertId() {\r\n  let currentId = localStorage.getItem('nextId');\r\n  if (currentId !== null) {\r\n    currentId = +currentId + 1;\r\n    localStorage.setItem('nextId', currentId);\r\n  } else {\r\n    currentId = 0;\r\n    localStorage.setItem('nextId', currentId)\r\n  }\r\n  return currentId;\r\n}\r\n\r\nfunction getCityName(id) {\r\n  const citiesMap = new Map([\r\n    ['0', 'Город не указан'],\r\n    ['1', 'Москва'],\r\n    ['2', 'Санкт-Петербург'],\r\n    ['3', 'Казань'],\r\n    ['4', 'Нижний Новгород ']\r\n  ]);\r\n  return citiesMap.get(id);\r\n}\r\n\r\nexport { getCityName, getNextAdvertId, transformPhone };","import React, { useState, useEffect } from 'react';\r\nimport { getNextAdvertId, transformPhone } from './serviceHelper';\r\n\r\nfunction CreationForm({ addAdvert }) {\r\n\r\n  const initAdvertObj = {\r\n    title: '',\r\n    description: '',\r\n    phone: '',\r\n    cityId: '0',\r\n  }\r\n\r\n  const [advertObj, setAdvertObj] = useState(initAdvertObj);\r\n  const [validAll, setValidAll] = useState(false);\r\n  const [validTitle, setValidTitle] = useState(false);\r\n  const [validDescr, setValidDescr] = useState(true);\r\n  const [validPhone, setValidPhone] = useState(false);\r\n  const [prevPhone, setPrevPhone] = useState('');\r\n\r\n  const [titleFieldValid, setTitleFieldValid] = useState(true);\r\n  const [descFieldValid, setDescFieldValid] = useState(true);\r\n  const [phoneFieldValid, setPhoneFieldValid] = useState(true);\r\n\r\n  useEffect(() => {\r\n    generalValidation();\r\n  })\r\n\r\n  function setAdvertField(fieldName, value) {\r\n    setAdvertObj(prevData => {\r\n      return {\r\n        ...prevData,\r\n        [fieldName]: value\r\n      }\r\n    })\r\n    return;\r\n  }\r\n\r\n  function generalValidation() {\r\n    (validTitle & validDescr & validPhone) ? setValidAll(true) : setValidAll(false);\r\n  }\r\n\r\n  function sendAdvert(e) {\r\n    e.preventDefault();\r\n    addAdvert({\r\n      id: getNextAdvertId(),\r\n      ...advertObj\r\n    });\r\n    setAdvertObj(initAdvertObj);\r\n  }\r\n\r\n  function validateTitle(event) {\r\n    const fieldValue = event.target.value;\r\n    if (fieldValue.length > 140 || fieldValue.length === 0) {\r\n      setValidTitle(false);\r\n      setTitleFieldValid(false);\r\n    } else {\r\n      setValidTitle(true);\r\n      setTitleFieldValid(true);\r\n    }\r\n    setAdvertField('title', fieldValue);\r\n  }\r\n\r\n  function validateDescr(event) {\r\n    const fieldValue = event.target.value;\r\n    if (fieldValue.length > 300) {\r\n      setValidDescr(false);\r\n      setDescFieldValid(false);\r\n    } else {\r\n      setValidDescr(true);\r\n      setDescFieldValid(true);\r\n    }\r\n    setAdvertField('description', fieldValue);\r\n  }\r\n\r\n  function validatePhone(event) {\r\n    const phoneFieldValue = event.target.value;\r\n\r\n    if (!/^([+\\s()-]|\\d)*$/.test(phoneFieldValue)) {\r\n      setAdvertObj({ ...advertObj, phone: prevPhone });\r\n      return;\r\n    }\r\n\r\n    if (phoneFieldValue.length < prevPhone.length) {\r\n      setAdvertObj({ ...advertObj, phone: phoneFieldValue });\r\n    } else {\r\n      setAdvertObj({ ...advertObj, phone: transformPhone(phoneFieldValue) })\r\n    }\r\n    setPrevPhone(phoneFieldValue);\r\n\r\n    if (phoneFieldValue.length === 18) {\r\n      setValidPhone(true);\r\n      setPhoneFieldValid(true);\r\n    } else {\r\n      setValidPhone(false);\r\n      setPhoneFieldValid(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"creation-form-block col-lg-6 col-md-6 col-sm-12\">\r\n      <h2 className=\"title mb-4\">Подать объявление</h2>\r\n      <form>\r\n        <div className=\"row mb-3\">\r\n          <div className=\"col-4 field-label\">\r\n            <label className=\"h5 label required\" htmlFor=\"title-field\">Заголовок</label>\r\n          </div>\r\n          <div className=\"col-8 field\">\r\n            <input type=\"text\" className=\"form-control\" placeholder=\"Название объявления\" id=\"title-field\"\r\n              required={true} value={advertObj.title} onChange={validateTitle} />\r\n            {!titleFieldValid ?\r\n              <div className=\"invalid-feedback\">\r\n                Пожалуйста, введите название длиной от 1 до 140 символов.\r\n            </div> :\r\n              ''}\r\n          </div>\r\n        </div>\r\n        <div className=\"row mb-3\">\r\n          <div className=\"col-4 field-label\">\r\n            <label className=\"h5 label\" htmlFor=\"description-field\">Описание</label>\r\n          </div>\r\n          <div className=\"col-8 field\">\r\n            <textarea className=\"form-control\" id=\"description-field\" placeholder=\"Описание объявления\" rows=\"3\"\r\n              value={advertObj.description} onChange={validateDescr}></textarea>\r\n            {!descFieldValid ?\r\n              <div className=\"invalid-feedback\">\r\n                Описание не может превышать длину в 300 символов.\r\n            </div> :\r\n              ''}\r\n          </div>\r\n        </div>\r\n        <div className=\"row mb-3\">\r\n          <div className=\"col-4 field-label\">\r\n            <label className=\"h5 label required\" htmlFor=\"phone-field\">Телефон</label>\r\n          </div>\r\n          <div className=\"col-8 field\">\r\n            <input type=\"text\" className=\"form-control\" placeholder=\"+7 (***) ***-**-**\" id=\"phone-field\"\r\n              required={true} value={advertObj.phone} onChange={validatePhone} />\r\n            {!phoneFieldValid ?\r\n              <div className=\"invalid-feedback\">\r\n                Пожалуйста, введите коррекртный номер телефона.\r\n            </div> :\r\n              ''}\r\n          </div>\r\n        </div>\r\n        <div className=\"row mb-3\">\r\n          <div className=\"col-4 field-label\">\r\n            <label className=\"h5 label\" htmlFor=\"select-field\">Город</label>\r\n          </div>\r\n          <div className=\"col-8 field\">\r\n            <select className=\"custom-select\" id=\"select-field\" value={advertObj.cityId} onChange={(e) => setAdvertField('cityId', e.target.value)}>\r\n              <option value=\"0\">Выберите город</option>\r\n              <option value=\"1\">Москва</option>\r\n              <option value=\"2\">Санкт-Петербург</option>\r\n              <option value=\"3\">Казань</option>\r\n              <option value=\"3\">Нижний Новгород </option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <button className=\"btn btn-light w-100\" type=\"submit\" disabled={!validAll} onClick={sendAdvert}>Отправить</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CreationForm;","import React from 'react';\r\nimport { getCityName } from './serviceHelper';\r\n\r\nfunction AdsBlock({ advertObj, removeAdvert }) {\r\n\r\n  const { id, title, description, cityId, phone } = advertObj;\r\n  const city = getCityName(cityId);\r\n\r\n  return (\r\n    <div className=\"posts-container card mb-3\">\r\n      <div className=\"card-body\">\r\n        <h5 className=\"card-title\">{title}</h5>\r\n        <p className=\"card-text\">{description}</p>\r\n        <h6 className=\"card-subtitle mb-2 text-muted\">{city}</h6>\r\n        <h6 className=\"card-text mb-2 text-muted\">{phone}</h6>\r\n        <button className=\"btn btn-danger\" onClick={() => removeAdvert(id)}>Удалить</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AdsBlock;","import React, { useState, useEffect } from 'react';\r\nimport Advert from './Advert';\r\n\r\nfunction AdsBlock({ adverts, removeAdvert }) {\r\n  const [advertsArr, setAdvertsArr] = useState([]);\r\n\r\n  useEffect(() => {\r\n    setAdvertsArr(adverts);\r\n  }, [adverts])\r\n\r\n  return (\r\n    <div className=\"post-block col-lg-6 col-md-6 col-sm-12 mt-5 pt-2\">\r\n      {advertsArr.length !== 0 ?\r\n        advertsArr.map((item) => {\r\n          return <Advert advertObj={item} removeAdvert={removeAdvert} key={item.id}/>\r\n        }) :\r\n        <h3>Объявлений пока нет :(</h3>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AdsBlock;","function setAdvertsAtLS(advertsArr) {\r\n  return localStorage.setItem('advertisments', JSON.stringify(advertsArr));\r\n}\r\n\r\nfunction getAllAdverts() {\r\n  const advertsArr = JSON.parse(localStorage.getItem('advertisments'));\r\n  if (advertsArr) return advertsArr\r\n  else return [];\r\n}\r\n\r\nexport { setAdvertsAtLS, getAllAdverts };","import React, { useState } from 'react';\nimport CreationForm from './CreationForm';\nimport AdsBlock from './AdsBlock';\nimport { getAllAdverts, setAdvertsAtLS } from './localStorageService';\nimport './App.css';\n\nfunction App() {\n\n  const [adverts, setAdverts] = useState([]);\n\n  React.useEffect(() => {\n    setAdverts(getAllAdverts());\n  }, [])\n\n  function addAdvert(advertObj) {\n    setAdverts([advertObj, ...adverts]);\n    setAdvertsAtLS([advertObj, ...adverts]);\n  }\n\n  function removeAdvert(id) {\n    const advRemoveIndx = adverts.findIndex((value) => value.id === id);\n    const newAdvertsArr = adverts.slice(0, advRemoveIndx).concat(adverts.splice(advRemoveIndx + 1));\n    setAdverts(newAdvertsArr);\n    setAdvertsAtLS(newAdvertsArr);\n  }\n\n  return (\n    <div className=\"containter col-lg-8 col-md-10 col-sm-12 row d-flex justify-content-center mx-auto\">\n      <CreationForm addAdvert={addAdvert} />\n      <AdsBlock adverts={adverts} removeAdvert={removeAdvert} />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}